---
interface Props {
  id: string
}

const {id} = Astro.props
---

<div>
  <input id={id} type="checkbox" class="peer hidden" />
  <label
    for={id}
    class="transition duration-300 cursor-pointer border-gray-500 font-medium peer-checked:bg-green-200 peer-checked:text-green-900 peer-checked:border-green-900 inline-flex items-center gap-2 px-2 py-1 border-2 rounded-md"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="2"
      stroke="currentColor"
      class="w-6 h-6"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>

    <span class="select-none">Complete</span>
  </label>
</div>

<script define:vars={{id}}>
  const input = document.getElementById(id)

  const stored = localStorage.getItem(id)
  if (stored) {
    input.checked = true
  }

  console.log({stored})

  input.addEventListener('change', event => {
    const isChecked = event.target.checked
    if (isChecked) {
      localStorage.setItem(id, true)
    } else {
      localStorage.removeItem(id)
    }
  })
</script>
